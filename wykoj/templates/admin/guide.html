{% extends "admin/layout.html" %}

{% block content %}
<div class="row">
    <div class="col">
        <h2 class="mb-1">Admin Guide</h2>
        <ul class="nav nav-tabs">
            <li class="nav-item">
                <a href="#tasks" class="nav-link active" data-bs-toggle="tab">Tasks</a>
            </li>
            <li class="nav-item">
                <a href="#testCases" class="nav-link" data-bs-toggle="tab">Test Cases</a>
            </li>
            <li class="nav-item">
                <a href="#contests" class="nav-link" data-bs-toggle="tab">Contests</a>
            </li>
        </ul>
    </div>
</div>
<div class="row">
    <div class="col mt-2">
        <div class="tab-content">
            <div class="tab-pane fade show active render_math" id="tasks">
                <h3>Task ID</h3>
                <p>
                    An ideal task ID consists of one uppercase letter followed by 3 decimal digits,
                    with the exceptions of:
                </p>
                <ul class="mb-2">
                    <li>
                        A contest task ID should be in the form of <code>CYYN#</code>,
                        where <code>YY</code> is the year modulo 100 (e.g. 20),
                        <code>N</code> is the contest number (0-9, A-Z if necessary)
                        and <code>#</code> is the task number.
                    </li>
                    <li>
                        A Team Formation Test task ID should be in the form of <code>TYY#</code>,
                        where <code>YY</code> and <code>#</code> are as specified above.
                    </li>
                </ul>
                <p>
                    The leading letter of a task ID should indicate the category of the task:
                </p>
                <ul class="mb-2">
                    <li><b>A</b> - <b>A</b>lgorithm training</li>
                    <li><b>B</b> - <b>B</b>asic programming exercises</li>
                    <li><b>C</b> - <b>C</b>ontests</li>
                    <li><b>P</b> - <b>P</b>ractices for general competitive programming</li>
                    <li><b>S</b> - <b>S</b>uplementary training materials</li>
                    <li><b>T</b> - <b>T</b>eam Formation Test</li>
                </ul>
                <h3>Public Visibility</h3>
                <p>
                    A task must not be made public until its test cases have been prepared.
                    Tasks created for contests must not be public until the contest results are confirmed.
                </p>
                <h3>Task Statement</h3>
                <p>
                    Task statements are written in HTML5. Guidelines are as follows:
                </p>
                <ul class="mb-2">
                    <li>Wrap headings in <code>&lt;h3&gt;&lt;/h3&gt;</code> and subheadings in <code>&lt;h4&gt;&lt;/h4&gt;</code>.</li>
                    <li>Wrap paragraphs in <code>&lt;p&gt;&lt;/p&gt;</code> tags.</li>
                    <li>Wrap text in <code>&lt;code&gt;&lt;/code&gt;</code> for <code>this format</code>.</li>
                    <li>
                        Escape the following HTML characters:
                        <ul class="mb-2">
                            <li><code>&lt;</code> as <code>&amp;lt;</code></li>
                            <li><code>&gt;</code> as <code>&amp;gt;</code></li>
                            <li><code>&amp;</code> as <code>&amp;amp;</code></li>
                        </ul>
                    </li>
                    <li>
                        You may use
                        <a href="https://getbootstrap.com/docs/5.0/components/accordion/" target="_blank">
                            Bootstrap v5.0.2
                        </a> classes, e.g. to control margin spacing.
                    </li>
                </ul>
                <p>
                    $ \KaTeX $ is available to render
                    <a target="_blank" href="https://katex.org/docs/supported.html">TeX functions</a>.
                    Use pairs of <code>$</code> and <code>$$</code>
                    to wrap inline and display math respectively.
                    Use <code>$ \$ $</code> to show a $ \$ $ symbol.
                </p>
                <p>
                    Inline math (<code>$ \frac{d}{de} \ln{e} = \frac{1}{e} $</code>):
                    $ \frac{d}{de} \ln{e} = \frac{1}{e} $
                </p>
                <p>
                    Display math (<code>$$ f'(\Delta) = \lim_{\Delta\Delta \to 0} \frac{f(\Delta + \Delta\Delta) - f(\Delta)}{\Delta\Delta} $$</code>):
                    $$ f'(\Delta) = \lim_{\Delta\Delta \to 0} \frac{f(\Delta + \Delta\Delta) - f(\Delta)}{\Delta\Delta} $$
                    Notice that display math takes up its own line and is centered.
                </p>
                <p>If math does not render on the task page, the HTML is probably invalid.</p>
                <p>
                    Do not create a section for sample test cases by yourself.
                    Create sample test cases as specified in the Test Cases tab so they can be displayed dynamically.
                </p>
                <h3>Time and Memory Limits</h3>
                <p>
                    Time limits can range from 0.01 to 10 s, correct to 2 d.p.
                    <br>
                    Memory limits can range from 1 to 256 MB, as an integral value.
                </p>
                <p>
                    Generally, unless you intend to (dis)allow solutions using certain algorithms with
                    high run time, in which case you should alter the limits accordingly,
                    you should set the time limit to 1 s and the memory limit to 64 MB.
                </p>
            </div>
            <div class="tab-pane fade" id="testCases">
                <h3>Directory and File Naming</h3>
                <p>
                    Upon task creation, create <a href="https://github.com/wykstemteam/wykoj-test-cases">test cases</a>
                    in the directory with the same name as the task ID. Inside the directory,
                    you should create test cases with file names in the format <code>s.t.x</code>,
                    where <code>s</code> is the subtask number, <code>t</code> is the test case number within the
                    subtask and <code>x</code> is either <code>in</code> or <code>out</code>,
                    which are the extensions of the input and output files respectively.
                    <code>s</code> and <code>t</code> should start from 1,
                    with the exception that test case files with <code>s</code> = 0 are treated as sample test cases,
                    which are displayed on the task page publicly.
                </p>
                <p>
                    Descriptions for sample test cases are optional.
                    You can write them in <code>0.t.txt</code>, where <code>t</code> is the test case number.
                    The content is parsed as HTML with support for <span class="render_math">$ \KaTeX $</span>,
                    so use <code>&lt;br&gt;</code> for line breaks.
                    They are placed in table cells, so you should not use header or paragraph tags.
                </p>
                <h3>Grader</h3>
                <p>
                    A grader is a used to judge the result of a submission
                    given the test case input and user program output.
                    You should use a grader if there are multiple accepted outputs for an input,
                    or if you intend to award partial scores.
                    You need not create output files for tasks with graders.
                    However, you should still create example output files for sample test cases,
                    i.e. <code>0.t.out</code>.
                </p>
                <p>
                    An example grader is as follows:
                </p>
                <div id="editor-grader"></div>
                <p class="mt-2">
                    The first line of input contains an integer <code>I</code>,
                    the number of lines in the test case input.
                    <code>I</code> lines of test case input follows.
                    <br>
                    The <code>I+1</code>th line contains an integer <code>O</code>,
                    the number of lines in the submission program output.
                    <code>O</code> lines of program output follows.
                </p>
                <p>
                    According to the test case input and program output,
                    a grader must output one of the following:
                    <ul class="mb-2">
                        <li>
                            <code>AC</code>,
                            indicating the verdict is <span class="accepted">Accepted</span>.
                        </li>
                        <li>
                            <code>PS X</code>,
                            indicating the verdict is a Partial Score of <code>X</code> points.
                            <code>X</code> should be an integer or a decimal number
                            (rounded off to 3 decimal places) between 0 and 100 exclusive.
                        </li>
                        <li><code>WA</code>, indicating the verdict is a Wrong Answer.</li>
                    </ul>
                </p>
                <p>
                    Note that the user program output may not follow the task output format
                    or even be empty. After ensuring proper functioning of the grader,
                    you are advised to wrap the grader code in a <code>try-catch</code> block
                    (or equivalent) and output <code>WA</code> when an error is caught.
                    A grader giving invalid verdicts or with errors will lead to System Errors.
                </p>
                <h3>Configuration File</h3>
                <p>
                    Create a file named <code>config.json</code> in the same directory.
                    The format of the file is as follows:
                </p>
                <div id="editor-config"></div>
                <p class="mt-2">
                    Booleans <code>"grader"</code> and <code>"batched"</code>
                    must be set in the configuration file.
                    <br>
                    Set <code>"grader"</code> to <code>true</code> if a grader is to be used,
                    otherwise <code>false</code>.
                    <br>
                    If a grader is to be used:
                    <ul class="mb-2">
                        <li>
                            Set <code>"grader_file"</code> to the filename of the grader file,
                            which should be present in the same directory.
                        </li>
                        <li>
                            Set <code>"grader_language"</code> to the programming language of the
                            grader. It must be one of the programming languages supported by the
                            judge (case-sensitive), which you can view on any task submit page.
                        </li>
                    </ul>
                    Set <code>"batched"</code> to <code>false</code> if points are awarded
                    per test case. The score of a submission is the mean of its test case scores.
                    <br>
                    Set <code>"batched"</code> to <code>true</code> if points are awarded
                    per subtask. The score of a subtask is the lowest score among its test cases.
                    The score of a submission is the weighted mean of its subtask scores
                    based on the <code>"points"</code> array.
                    <br>
                    If <code>"batched"</code> is set to true,
                    create a list of integers <code>"points"</code> indicating subtask points,
                    starting from subtask 1. The points should sum to 100.
                </p>
                <h3>Miscellaneous</h3>
                <p>
                    Please ensure both input and output files
                    contain no trailing whitespace at the end of each line
                    and end with a <code>\n</code>.
                    This is especially important for the proper operation of graders.
                    The judging backend will try to fix this for you.
                </p>
                <p>
                    If you change the task ID of a task,
                    you must also alter the name of the directory storing its test cases accordingly.
                </p>
                <p>
                    If submitting to a task is disabled,
                    either no test cases are present in <code>test_cases/[task_id]</code>
                    or the entire directory is missing, or the configuration file is incorrect.
                </p>
                <p>Despite the term "grader", the judge does not support interactive tasks.</p>
            </div>
            <div class="tab-pane fade" id="contests">
                <h3>Public Participation</h3>
                <p>
                    If you intend to allow anyone with an account to join and leave the contest,
                    set it as public.
                    Otherwise, do not set it as public and manually add/remove contestants.
                </p>
                <h3>Phases of a Contest</h3>
                <h4>Pre-preparation</h4>
                <p>
                    This phase starts when the contest is created and ends 1 minute
                    before the contest starts. If you set the contest to be public,
                    participants can join/leave freely (only in this phase).
                </p>
                <h4>Preparation</h4>
                <p>
                    This phase spans the 1 minute period before the contest starts.
                    In this phase, participants can no longer join/leave freely.
                    They will also be unable to access most pages
                    unrelated to the contest until the contest ends.
                    Contest tasks, submissions and results pages remain inaccessible.
                </p>
                <h4>Ongoing</h4>
                <p>
                    This phase is when the contest actually takes place.
                    Contestants can access contest tasks and results,
                    create and view their submissions.
                </p>
                <h4>Ended</h4>
                <p>The contest has ended.</p>
                <h3>Miscellaneous</h3>
                <p>
                    Note that contestants are unable to access contest tasks after a contest
                    if any of the contest tasks remain private. They will also be unable to access
                    submissions to these tasks. Additionally, non-contestants will be unable
                    to view the results of the contests (contestants will).
                    This is to increase the reusability of tasks in multiple contests.
                    If you are sure the contest tasks will not be reused in the future,
                    you may make them public.
                </p>
                <p>
                    <b>As an admin, you should not take part in any contests.
                    If you have submitted to any of the contest tasks prior to the contest,
                    there will be unexpected behavior in the display of contest results.</b>
                </p>
            </div>
        </div>
    </div>
</div>
{% endblock %}
